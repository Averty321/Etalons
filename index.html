<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Управление эталонами</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        button {
            margin-right: 10px;
        }
        #items {
            margin-top: 20px;
            list-style-type: none;
            padding: 0;
        }
        .item {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <button id="createRoom">Создать комнату</button>
    <button id="addStandard">Добавить эталон</button>

    <ul id="items"></ul>

    <script>
        let standards = [];

        document.getElementById('createRoom').addEventListener('click', () => {
            alert('Комната создана!');
            // Логика создания комнаты
        });

        document.getElementById('addStandard').addEventListener('click', () => {
            const name = prompt('Введите наименование эталона:');
            const number = prompt('Введите номер эталона:');
            const type = prompt('Выберите тип (поверка/калибровка):');
            const date = new Date(prompt('Введите дату поверки (ГГГГ-ММ-ДД):'));
            const interval = parseInt(prompt('Введите межповерочный/калибровочный интервал в днях:'));

            const expirationDate = new Date(date);
            expirationDate.setDate(expirationDate.getDate() + interval);

            const daysLeft = Math.ceil((expirationDate - new Date()) / (1000 * 60 * 60 * 24));

            const standard = {
                name,
                number,
                expirationDate,
                daysLeft,
                type
            };

            standards.push(standard);
            renderStandards();
        });

        function renderStandards() {
            const itemsList = document.getElementById('items');
            itemsList.innerHTML = '';
            standards.forEach((standard, index) => {
                const listItem = document.createElement('li');
                listItem.className = 'item';
                listItem.textContent = `Комната 901 - Наименование: ${standard.name}, Номер: ${standard.number}, Дата поверки: ${standard.expirationDate.toLocaleDateString()}, Осталось дней: ${standard.daysLeft}`;
                
                const editButton = document.createElement('button');
                editButton.textContent = 'Изменить';
                editButton.onclick = () => editStandard(index);
                
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Удалить';
                deleteButton.onclick = () => deleteStandard(index);
                
                listItem.appendChild(editButton);
                listItem.appendChild(deleteButton);
                itemsList.appendChild(listItem);
            });
        }

        function editStandard(index) {
            const standard = standards[index];
            const name = prompt('Введите новое наименование эталона:', standard.name);
            const number = prompt('Введите новый номер эталона:', standard.number);
            const type = prompt('Выберите тип (поверка/калибровка):', standard.type);
            const date = new Date(prompt('Введите новую дату поверки (ГГГГ-ММ-ДД):', standard.expirationDate.toISOString().split('T')[0]));
            const interval = parseInt(prompt('Введите новый межповерочный/калибровочный интервал в днях:', (standard.expirationDate - new Date(date)) / (1000 * 60 * 60 * 24)));

            const expirationDate = new Date(date);
            expirationDate.setDate(expirationDate.getDate() + interval);
            const daysLeft = Math.ceil((expirationDate - new Date()) / (1000 * 60 * 60 * 24));

            standards[index] = { name, number, expirationDate, daysLeft, type };
            renderStandards();
        }

        function deleteStandard(index) {
            if (confirm('Вы уверены, что хотите удалить эталон?')) {
                standards.splice(index, 1);
                renderStandards();
            }
        }
    </script>

</body>
</html>
